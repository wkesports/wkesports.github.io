<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WK-Esports</title>
    <link type="text/css" rel="stylesheet" href="./css/major.css" />
    <style>
        *{
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        html{
            font-size: 16px;
        }
        body{
            position: relative;
            height: 50000px;
            overflow-x: hidden;
        }
        .topbar{
            width: 100vw;
            height: 3rem;
            position: fixed;
            top: 0;left: 0;
            backdrop-filter: blur(2rem);
            -webkit-backdrop-filter: blur(2rem);
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            z-index: 1;
        }
        .topbar::before{
            content: '';
            position: absolute;
            top: 0;left: 0;right: 0;bottom: 0;
            background: black;
            opacity: 30%;
            z-index: 0;
        }
        #wkflag{
            width: 3rem;
            height: 3rem;
            z-index: 2;
        }
        #mainpic{
            position: fixed;
            top: 0;
            width: 100vw;
            z-index: -1;
            background: url("./images/total.png") center center no-repeat;
            background-size: cover;
            display: flex;
            align-items: center;
            flex-direction: column;
            overflow-x: hidden;
            opacity: 0;
        }
        #mainpic>.text{
            z-index: 1;
            text-shadow: 0 0 1rem white;
        }
        .blur{
            position: absolute;
            top: 0;left: 0;right: 0;bottom: 0;
            backdrop-filter: blur(0rem);
            -webkit-backdrop-filter: blur(0rem);
            z-index: 0;
        }
        #about{
            position: fixed;
            background: white;
            top: 100vh;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #about>h1{
            margin-top: 6rem;
        }
        #qrcode{
            position: absolute;
            top: calc(20vh);
            transform: scale(0.2);
            z-index: 500;
        }
        h1{
            font-size: 4rem;
        }
        .icons{
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .icon{
            position: absolute;
            top: 100vh;
            left: 50vw;
            width: 50vw;
            height: 110vh;
            display: flex;
            background: purple;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            opacity: 1;
        }
        .icon>h3{
            text-align: center;
            font-size: xx-large;
            color: white;
            margin-bottom: 2rem;
        }
        .icon>img{
            width: 300px;
            height: 300px;
            border-radius: 50%;
        }
        .icon_bg_blur{
            transform: scale(1.5);
            background: center center no-repeat;
            background-size: cover;
            position: absolute;
            top:0;left: 0;right: 0;bottom: 0;
        }
        .icon_bg_blur::before{
            content: '';
            position: absolute;
            top: 0;left: 0;right: 0;bottom: 0;
            backdrop-filter: blur(2rem);
            -webkit-backdrop-filter: blur(2rem);
        }
    </style>
</head>
<body>
    <div class="topbar">
        <img src="./images/WK_flag.png" id="wkflag"></img>
    </div>
    <div id="mainpic" style="height: 100vh;">
        <div id="mainpic_blur" class="blur"></div>
        <h1 class="text" id="tp1" style="margin-top: 13rem;letter-spacing: 2rem;font-weight: bold;font-size: 4rem;">WKESPORTS</h1>
        <h3 class="text" id="tp2" style="margin-top: 2rem;font-weight: lighter;"> - 专业的团队 - 展现你的才华 - 分享你的故事  - </h3>
        <h3 class="text" id="tp3" style="margin-top: 2rem;font-weight: lighter;">当你迷茫时 当你把把白给时 当你遇到挫折时 加入我们 让你遇到更好的自己</h3>
    </div>
    <div id="about">
        <h1>介绍我们</h1>
        <div id="icons">
            <div class='icon'>
                <!-- <div class='icon_bg_blur' style="background-image: url('https://q1.qlogo.cn/g?b=qq&nk=516470700&s=640')"></div> -->
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">Yami</h3>
                <img style="z-index: 2;" src="https://q1.qlogo.cn/g?b=qq&nk=516470700&s=640"/>
            </div>
            <div class='icon'>
                <!-- <div class='icon_bg_blur' style="background-image: url('https://q1.qlogo.cn/g?b=qq&nk=2547670357&s=640')"></div> -->
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">白荼</h3>
                <img style="z-index: 3;" src="https://q1.qlogo.cn/g?b=qq&nk=2547670357&s=640"/>
            </div>
            
            <div class='icon'>
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">阿枝</h3>
                <img src="https://q1.qlogo.cn/g?b=qq&nk=841500898&s=640"/>
            </div>
            
            
            <div class='icon'>
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">唔姆</h3>
                <img src="https://q1.qlogo.cn/g?b=qq&nk=852050163&s=640"/>
            </div>
            <div class='icon'>
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">惑惑</h3>
                <img src="https://q1.qlogo.cn/g?b=qq&nk=2209438589&s=640"/>

            </div>
            <div class='icon'>
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">安利</h3>
                <img src="https://q1.qlogo.cn/g?b=qq&nk=624349820&s=640"/>

            </div>
            <div class='icon'>
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">陈有奶</h3>
                <img src="https://q1.qlogo.cn/g?b=qq&nk=2865612109&s=640"/>

            </div>
            <div class='icon'>
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">So Damn Good</h3>
                <img src="https://q1.qlogo.cn/g?b=qq&nk=549556031&s=640"/>

            </div>
            <div class='icon'>
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">泡泡</h3>
                <img src="https://q1.qlogo.cn/g?b=qq&nk=1551272580&s=640"/>

            </div>
            <div class='icon'>
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">小宝</h3>
                <img src="https://q1.qlogo.cn/g?b=qq&nk=497626396&s=640"/>

            </div>
            <div class='icon'>
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">麦片</h3>
                <img src="https://q1.qlogo.cn/g?b=qq&nk=2810205153&s=640"/>

            </div>
            <div class='icon'>
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">御坂</h3>
                <img src="https://q1.qlogo.cn/g?b=qq&nk=1183764010&s=640"/>

            </div>
            <div class='icon'>
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">魔男</h3>
                <img src="https://q1.qlogo.cn/g?b=qq&nk=279396032&s=640"/>

            </div>
            <div class='icon'>
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">小小</h3>
                <img src="https://q1.qlogo.cn/g?b=qq&nk=1255762001&s=640"/>

            </div>
            <div class='icon'>
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">Geyu</h3>
                <img src="https://q1.qlogo.cn/g?b=qq&nk=1700132494&s=640"/>

            </div>
            
            <div class='icon'>
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">樽哥</h3>
                <img src="https://q1.qlogo.cn/g?b=qq&nk=927309247&s=640"/>

            </div>
            <div class='icon'>
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">鸡哥</h3>
                <img src="https://q1.qlogo.cn/g?b=qq&nk=969409834&s=640"/>

            </div>
            <div class='icon'>
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">钥匙</h3>
                <img src="https://q1.qlogo.cn/g?b=qq&nk=1003998743&s=640"/>

            </div>
            <div class='icon'>
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">二姑</h3>
                <img src="https://q1.qlogo.cn/g?b=qq&nk=807139428&s=640"/>

            </div>
            <div class='icon'>
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">BOT</h3>
                <img src="https://q1.qlogo.cn/g?b=qq&nk=1021863398&s=640"/>

            </div>
            <div class='icon'>
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">B</h3>
                <img src="https://q1.qlogo.cn/g?b=qq&nk=1363964141&s=640" />

            </div>
    
            <div class='icon'>
                 <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">莎莎</h3>
                 <img src="https://q1.qlogo.cn/g?b=qq&nk=805034840&s=640" />

            </div>
    
            <div class='icon'>
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">阿林</h3>
                <img src="https://q1.qlogo.cn/g?b=qq&nk=2637197332&s=640" />
            </div>
    
            <div class='icon'>
                <h3 style="font-weight: bold;font-family: Arial, Helvetica, sans-serif;">Aki</h3>
                <img src="https://q1.qlogo.cn/g?b=qq&nk=2755770955&s=640" />
            </div>
            <img width="200px" height="200px" id="qrcode" src="./images/group_qrcode.png" >
        </div>
        

        
    </div>

    <script lang="javascript" src="./js/basic.js"></script>
    <script>
        var vh = document.documentElement.clientHeight
        var vw = document.documentElement.clientWidth
        let _rem = vw / 16
        console.log(_rem);
        function create_LINEAR_ANIMATION(callback,pre='',suf='',keyframs){
            var obj = new Object
            obj.RATION = 0
            obj.KEYFRAMEs = keyframs
            obj.callback = callback
            obj.pre = pre
            obj.suf = suf
            obj.intervalI = 0
            obj.value = 0
            obj.get = (o,r)=>{
                if(o.KEYFRAMEs.length==1){
                    o.intervalI = 0
                    // o.value = o.KEYFRAMEs[0].y
                    return o.KEYFRAMEs[0].y
                }
                if(r<o.KEYFRAMEs[0].r){
                    o.intervalI = 0
                    // o.value = o.KEYFRAMEs[0].y
                    return o.KEYFRAMEs[0].y
                }
                if(r>=o.KEYFRAMEs[o.KEYFRAMEs.length-1].r){
                    o.intervalI = o.KEYFRAMEs.length-1
                    // o.value = o.KEYFRAMEs[o.KEYFRAMEs.length-1].y
                    return o.KEYFRAMEs[o.KEYFRAMEs.length-1].y
                }
                var intervalI = -1
                for(var i = 0;i<o.KEYFRAMEs.length-1;i++){
                    if(r>=o.KEYFRAMEs[i].r&&r<o.KEYFRAMEs[i+1].r){
                        intervalI = i
                        break
                    }
                }
                o.intervalI = intervalI
                var b
                if(lerpable(o.KEYFRAMEs[intervalI].y)){
                    b = lerp(r-o.KEYFRAMEs[intervalI].r,
                                    o.KEYFRAMEs[intervalI+1].r-o.KEYFRAMEs[intervalI].r,
                                    o.KEYFRAMEs[intervalI].y,
                                    o.KEYFRAMEs[intervalI+1].y
                    )
                }else{
                    b = o.KEYFRAMEs[intervalI].y
                }
                // o.value = b
                return b
            }
            obj.update = (o,r)=>{
                var b=o.get(o,r)
                var a = pre+b+suf
                o.callback(a,b,o)
            }
            return obj
        }
        let mpblur = document.getElementById('mainpic_blur')
        let mainpic = document.getElementById('mainpic')
        let tp1 = document.getElementById('tp1')
        let tp2 = document.getElementById('tp2')
        let tp3 = document.getElementById('tp3')
        let about = document.getElementById('about')
        let qrcode = document.getElementById('qrcode')

        let icons = document.getElementById('icons').children
        
        /* initial */
        //着色
        var icon_bg_colors = [
            '#f38181','#a6e3e9','#3f72af','#30e3ca','#ffc7c7',
            '#323232','#0d7377','#b9bbdf','#62d2a2','#590d82',
            '#005691','#ff8264','#d6c8ff','#c6f1e7','#ed8d8d',
            '#62d2a2','#5e63b6','#00bbf0','#c06c84','#66bfbf',
            '#7f4a88','#95e8d7','#163172','#900048'
        ]

        
        for(var i = 0;i<icons.length-1;i++){
            var bg_blur = document.createElement('div')
            bg_blur.className = 'icon_bg_blur'
            icons[i].appendChild(bg_blur)
            // icons[i].style.backgroundColor = icon_bg_colors[i]
            // // icons[i].children[2].
            icons[i].children[2].style.backgroundImage = 'url("'+icons[i].children[1].src+'")'
            icons[i].children[2].style.zIndex =2+2*i 
            icons[i].children[1].style.zIndex =2*i+3
            icons[i].children[0].style.zIndex =2*i+3
            if(vw<=831){
                icons[i].style.left = 0
                icons[i].style.width = 100+'vw'
                continue
            }
            if(i%2==0){
                icons[i].style.left = 0
                continue
            }
        }
        
        /*动画声明*/
        var scroll_KEYFRAME_anis = [
            //主图片显示
            create_LINEAR_ANIMATION(
                callback=mainpic_display,pre='',suf='',
                keyframs=[{r:0,y:'flex'},{r:800+vh,y:'none'}]
            ),
            //滚动高斯模糊
            create_LINEAR_ANIMATION(
                callback=mpblur_ani_callback,
                pre="blur(",
                suf="rem)",
                keyframs=[{r:0,y:0},{r:800,y:2}]
            ),
            //WKESPORTS文字变化
            create_LINEAR_ANIMATION(
                callback=tp1_text_ani_callback,
                pre='',
                suf='',
                keyframs=[{r:200,y:'WKESPORTS'},{r:300,y:'KESPORT'},
                {r:400,y:'ESPOR'},{r:500,y:'SPO'},
                {r:600,y:'P'},{r:700,y:''}]
            ),
            //tp2和tp2透明度
            create_LINEAR_ANIMATION(
                callback=tp2tp3_opa_ani_callback,
                pre='',
                suf='%',
                keyframs=[{r:200,y:100},{r:700,y:0}]
            ),
            //about滚动
            create_LINEAR_ANIMATION(
                callback=about_scroll_ani_callback,
                pre='',
                suf='px',
                keyframs=[{r:800,y:vh},{r:800+vh,y:0},{r:2000+24*vh,y:0},{r:3000+24*vh,y:-1.1*vh}]
            ),
            //二维码缩放
            create_LINEAR_ANIMATION(
                callback=qrcode_scale,
                pre='scale(',
                suf=')',
                keyframs=[{r:700+vh,y:0.2},{r:800+vh,y:1}]
            ),
            //二维码纵向移动
            create_LINEAR_ANIMATION(
                callback=qrcode_vmove,
                pre='',
                suf='px',
                keyframs=[{r:800+vh,y:0.2*vh},{r:1100+vh,y:60}]
            ),
            //二维码横向移动
            create_LINEAR_ANIMATION(
                callback=qrcode_hmove,
                pre='',
                suf='px',
                keyframs=[{r:800+vh,y:0.5*vw-100},{r:1100+vh,y:100}]
            ),
            //头像移动
            create_LINEAR_ANIMATION(
                callback=icon_move,
                pre='',
                suf='px',
                keyframs=[{r:1100+vh,y:1.1*vh},{r:1500+vh,y:0},
                {r:vw<831?2000+1.5*vh:2000+2*vh,y:0},
                {r:vw<831?2000+2*vh:2000+3*vh,y:-2*_rem}]
            ),
            //头像显示
            create_LINEAR_ANIMATION(
                callback=icon_display,
                pre='',
                suf='',
                keyframs=[{r:0,y:'none'},{r:1100+vh,y:'flex'},
                {r:vw<831?2000+2*vh:2000+3*vh,y:'none'}]
            )
        ]
        var timer_KEYFRAME_anis = [
            //开场图片透明度
            create_LINEAR_ANIMATION(
                callback=pic_opa_ani_callback,
                pre='',
                suf='%',
                keyframs=[{r:0,y:0},{r:0.6,y:100}]
            )
        ]
        
        /*动画回调函数*/
        function icon_display(r,v,o){
            for(var i = 0;i<24;i++){
                icons[i].style.display = o.get(o,scrollTop-(i*vh+100))
            }
        }
        function mainpic_display(r){
            mainpic.style.display = r
        }
        function icon_move(r,v,o){
            for(var i = 0;i<24;i++){
                icons[i].style.top = o.get(o,scrollTop-(i*vh+100))+'px'
            }
        }
        function qrcode_hmove(r){
            qrcode.style.left = r
        }
        function qrcode_vmove(r){
            qrcode.style.top = r
        }
        function qrcode_scale(r){
            qrcode.style.transform = r
        }
        function mpblur_ani_callback(r){
            mpblur.style.backdropFilter = r
            mpblur.style.webkitBackdropFilter = r
        }
        function tp2tp3_opa_ani_callback(r){
            tp2.style.opacity = r
            tp3.style.opacity = r
        }
        function tp1_text_ani_callback(r){
            tp1.innerHTML = r
        }
        function text_opa_ani_callback(r){
            tp1.style.opacity = r
            tp2.style.opacity = r
            tp3.style.opacity = r
        }
        function pic_opa_ani_callback(r){
            mainpic.style.opacity = r
        }
        function about_scroll_ani_callback(r){
            about.style.top = r
        }
        /************/

        setInterval(()=>{
                vh = document.documentElement.clientHeight
                vw = document.documentElement.clientWidth
        },500)
        window.onload=()=>{
            /*滚动页面动画*/
            window.onscroll = ()=>{
                scrollTop = document.documentElement.scrollTop;
                for(var i=0;i<scroll_KEYFRAME_anis.length;i++){
                    scroll_KEYFRAME_anis[i].update(scroll_KEYFRAME_anis[i],scrollTop)
                }
            }
            
            /*时间流逝动画*/
            var t = setInterval(()=>{
                for(var i=0;i<timer_KEYFRAME_anis.length;i++){
                    timer_KEYFRAME_anis[i].update(timer_KEYFRAME_anis[i],timer)
                }

                timer+=0.01
                if(timer>8){
                    clearInterval(t)
                }
            },10)
        }
        window.onresize=()=>{
            vh = document.documentElement.clientHeight
            vw = document.documentElement.clientWidth
            console.log('change size:(%d,%d)',vw,vh);
        }
        
    </script>
</body>
</html>